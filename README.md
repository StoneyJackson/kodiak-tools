# Kodiak Tools

## 1. Overview

Kodiak Tools provides a CLI to help instructors manage assignment archives for grading.

When you download a zip of student work from Kodiak, its name is crazy long (e.g., `Homework 4 Download May 25, 2018 1118 AM.zip`). When you unzip it, the submission files inside have even crazier names (e.g., `11824-66708 - Lucy Pelt - Feb 9, 2017 1004 PM - LPelt_HW4.txt`). These files are not easily sortable by anything meaningful such as last name, time submitted, or original filename. And sometimes the original filename (the one the student gave the file) is important (e.g., if it is a program that needs to be compiled and run, these names will not do). Last, you make have asked students to submit a zip of multiple files; now you have to unzip each students submission, but the names of these files may conflict with those that other students unless you are careful and extract them into a separate directory (which you need to create with a good name). Last, if you like to make comments in student files and return the graded work by zipping everything up and uploading it to Kodiak, you must be careful not to rename anything, so you need to somehow undo all that unpacking and name de-mangling you did (or avoid it in the first place) so you can create a zip that Kodiak will accept. All of this is tedious and error prone.

Kodiak Tools is intended to make this process easier. Let's walk through an example. After downloading an assignment archive `Homework\ 4\ Download\ May\ 25\,\ 2018\ 1118\ AM.zip` from Kodiak, you use Kodiak Tools to extract the archive into an organized project.

```
$ kodiak init h4 ~/Downloads/Homework\ 4\ Download\ May\ 25\,\ 2018\ 1118\ AM.zip
$ tree h4
h4
├── gradedArchive
├── gradedSubmissions
├── originalArchive
│   └── Homework\ 4\ Download\ May\ 25,\ 2018\ 1118\ AM.zip
├── originalSubmissions
│   ├── 11690-66708\ -\ Charlie\ Brown\ -\ Feb\ 9,\ 2017\ 614\ PM\ -\ CharlieB_HW4.zip
│   ├── 11824-66708\ -\ Lucy\ Pelt\ -\ Feb\ 9,\ 2017\ 1004\ PM\ -\ LPelt_HW4.txt
│   ├── 11824-66708\ -\ Lucy\ Pelt\ -\ Feb\ 9,\ 2017\ 1007\ PM\ -\ LPelt_HW4.txt
│   ├── 11824-66708\ -\ Lucy\ Pelt\ -\ Feb\ 9,\ 2017\ 1017\ PM\ -\ LPelt_HW4.txt
│   └── index.html
└── submissions
    ├── Brown_Charlie
    │   └── CharlieB_HW4
    │       ├── bar.txt
    │       ├── foo.txt
    │       └── subdir
    │           └── baz.txt
    └── Pelt_Lucy
        ├── LPelt_HW4\ (1).txt
        ├── LPelt_HW4\ (2).txt
        └── LPelt_HW4.txt
```

The original archive and its contents are placed into originalArchive and originalSubmissions in case you need them (hopefully not). What's more interesting, and more useful, is the submissions directory. This directory contains a subdirectory for each student organized by last name first. In each student's directory are their submission files; but these files are renamed to the original name the student gave the file. If a student uploaded multiple submissions with the same name, the most resent is given the original name (e.g., `LPelt_HW4.txt`), and the older copies are given the same name with a number appended (e.g., `LPelt_HW4 (1).txt`). Last, if a student submitted an archive, that archive is extracted into a subdirectory within the student directory. Now you are ready to grade.

To grade, review the files under the submissions directory. You may modify any file to add feedback for students about their work. But don't delete, rename, or add a new file (except inside directories created from zip files; then do whatever you like). Those kinds of changes won't be represented when you try to return the work.

When you're done grading, create an archive of the graded work ready for upload to Kodiak.

```
$ cd h4
$ kodiak archive
$ ls gradedArchive/
Homework 4 Download May 25, 2018 1118 AM.zip
```

The graded submissions have been copied into gradedSubmissions with the ugly names that Kodiak named them originally, and a zip containing all the graded submissions is placed in gradedArchive (with the original ugly name given by Kodiak). This archive can be loaded to Kodiak to return to students the marked work.

***NOTE: I have not been able to test the uploading to Kodiak an archive generated by Kodiak Tools. So I'm not 100% sure that Kodiak will accept the archive generated by Kodiak Tools. If you get a chance to test it before me, please let me know your results in [issue #4](https://github.com/StoneyJackson/kodiak-tools/issues/4).***


## 2. Requirements

Requires Python 3.6 or higher to run.

## 3. Download and Install

1. Download [latest release of kodiak.pyz](https://github.com/StoneyJackson/kodiak-tools/releases).

2. Optionally rename it to kodiak.

    ```
    mv kodiak.pyz kodiak
    ```

3. Make sure it is executable.

    ```
    chmod +x kodiak
    ```

4. Move it to a directory that is in your system's path.

    ```
    mv kodaik ~/bin
    ```

5. Start using kodiak. Start with help.

    ```
    kodiak --help
    kodiak [COMMAND] --help
    ```

If you get an error, it might be that your default version of Python is not 3.6 or higher. Check your python version with `python --version`. If it is not 3.6 or higher, you have two options. 1) Run it using `python3 path/to/kodiak.pyz` or 2) make Python 3.6+ your default python (checkout [Mac](https://stackoverflow.com/questions/18425379/how-to-set-pythons-default-version-to-3-3-on-os-x), [Win](https://stackoverflow.com/questions/5087831/how-should-i-set-the-default-python-version-in-windows), or [Linux](https://askubuntu.com/questions/320996/how-to-make-python-program-command-execute-python-3) for more information).

## 4. Getting Started as a Developer

These instructions will get you a copy of the project up and running on your local machine for development and testing purposes.

### Prerequisites

To develop on this project, you'll need the following software installed and available from the
command-line:

1. Python 3.6+
2. pipenv
3. GNU make
4. [hub](https://github.com/github/hub)

### Installing the Development Environment

1. Fork this repository and clone your fork.


2. In the root of your clone, create a virtual environment for the project using Python 3.6 or higher.

    ```
    pipenv --python 3.6
    ```

3. Install all dependencies for development.

    ```
    pipenv install --dev
    ```

4. Install the kodiak command into your virtual environment. `-e` will install using
symlinks into src so that changes you make in src will be immediately reflected in the install.

    ```
    pipenv install -e .
    ```

5. Now enable the shell and give your development install of kodiak a test drive.

    ```
    pipenv shell
    kodiak --help
    ```

### Running the tests

Run all tests (including style and type checking) as follows.

```
make test
```

### Making a release

This requires `hub` to be installed. Basically this will bumpversions

```
make release
```

## 5. Built With

* [bumpversion](https://github.com/peritus/bumpversion)
* [click](http://click.pocoo.org/5/) - Framework for building command-line applications
* [coverage](https://coverage.readthedocs.io/en/coverage-4.5.1/) - Test coverage reports
* [hub](https://github.com/github/hub)
* [flake8](http://flake8.pycqa.org/en/latest/) - Automated style tests
* [GNU make](https://www.gnu.org/software/make/) - Developer task automation
* [mypy](http://mypy-lang.org/) - Static type checking
* [pytest-mypy](https://github.com/dbader/pytest-mypy) - pytest mypy plugin
* [pipenv](https://docs.pipenv.org/) - Virtual environment and dependency manager
* [pytest](https://docs.pytest.org/en/latest/) - Unit test framework
* [pytest-cov](https://pytest-cov.readthedocs.io/en/latest/) - pytest coverage plugin
* [tox](https://tox.readthedocs.io/en/latest/)
* [zipapp](https://docs.python.org/3/library/zipapp.html) - Packaging into standalone, executable zips

## 6. Contributing

Please read [CONTRIBUTING.md](CONTRIBUTING.md) for details on our code of conduct, and the process for submitting pull requests to us.

## 7. Versioning

We use [SemVer 2.0](https://semver.org/) for versioning. The "public API" of this project is the command-line interface the application provides. For the versions available, see the [tags on this repository](https://github.com/your/project/tags).

## 8. Authors

* [Stoney Jackson](https://github.com/StoneyJackson)

See also the list of [contributors](https://github.com/StoneyJackson/kodiak-tools/contributors) who participated in this project.

## 9. License

This project is licensed under the GPLv3 - see the [LICENSE](LICENSE) file for details

## 10. Acknowledgments

* Hat tip to all the awesome development tools!
